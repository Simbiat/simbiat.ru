{"version":3,"file":"password.js","sourceRoot":"/js/Pages/","sources":["uc/password.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,cAAc;IAEN,IAAI,GAA2B,IAAI,CAAC;IACpC,MAAM,GAA4B,IAAI,CAAC;IAExD;QAEI,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QACvD,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC9D,CAAC;IACL,CAAC;IAEO,MAAM;QAEV,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAE3B,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1B,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,kBAAkB,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC1H,MAAM,IAAI,GAAG,QAA4B,CAAC;gBAC1C,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC;oBACrB,WAAW,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC;gBAC/C,CAAC;qBAAM,CAAC;oBACJ,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;gBAC/C,CAAC;gBACD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;oBACd,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC9B,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;CACJ","sourcesContent":["export class PasswordChange\r\n{\r\n    private readonly form: HTMLFormElement | null = null;\r\n    private readonly button: HTMLInputElement | null = null;\r\n\r\n    public constructor()\r\n    {\r\n        this.form = document.querySelector('#password_change');\r\n        if (this.form) {\r\n            submitIntercept(this.form, this.change.bind(this));\r\n            this.button = this.form.querySelector('#password_submit');\r\n        }\r\n    }\r\n    \r\n    private change(): void\r\n    {\r\n        if (this.form && this.button) {\r\n            //Get form data\r\n            const formData = new FormData(this.form);\r\n            buttonToggle(this.button);\r\n            void ajax(`${location.protocol}//${location.host}/api/uc/password`, formData, 'json', 'PATCH', 60000, true).then((response) => {\r\n                const data = response as ajaxJSONResponse;\r\n                if (data.data === true) {\r\n                    addSnackbar('Password changed', 'success');\r\n                } else {\r\n                    addSnackbar(data.reason, 'failure', 10000);\r\n                }\r\n                if (this.button) {\r\n                    buttonToggle(this.button);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}