{"version":3,"file":"threads.js","sourceRoot":"/js/Pages/","sources":["talks/threads.ts"],"names":[],"mappings":"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","sourcesContent":["export class Threads {\r\n  private readonly add_post_form: HTMLFormElement | null = null;\r\n  private readonly edit_thread_form: HTMLFormElement | null = null;\r\n  private readonly private_thread_form: HTMLFormElement | null = null;\r\n  private readonly pin_thread_form: HTMLFormElement | null = null;\r\n  private readonly closed_thread_form: HTMLFormElement | null = null;\r\n  private readonly move_thread_form: HTMLFormElement | null = null;\r\n  private readonly delete_thread_form: HTMLFormElement | null = null;\r\n  private readonly post_form: PostForm | null = null;\r\n\r\n  public constructor() {\r\n    this.add_post_form = document.querySelector('#post_form');\r\n    this.edit_thread_form = document.querySelector('#thread_form');\r\n    this.private_thread_form = document.querySelector('#thread_private_form');\r\n    this.pin_thread_form = document.querySelector('#thread_pin_form');\r\n    this.closed_thread_form = document.querySelector('#thread_closed_form');\r\n    this.move_thread_form = document.querySelector('#thread_move_form');\r\n    this.delete_thread_form = document.querySelector('#thread_delete_form');\r\n    this.post_form = document.querySelector('post-form');\r\n    if (this.add_post_form) {\r\n      submitIntercept(this.add_post_form, this.addPost.bind(this));\r\n    }\r\n    if (this.edit_thread_form) {\r\n      submitIntercept(this.edit_thread_form, this.edit.bind(this));\r\n    }\r\n    if (this.private_thread_form) {\r\n      submitIntercept(this.private_thread_form, this.makePrivate.bind(this));\r\n    }\r\n    if (this.pin_thread_form) {\r\n      submitIntercept(this.pin_thread_form, this.pin.bind(this));\r\n    }\r\n    if (this.closed_thread_form) {\r\n      submitIntercept(this.closed_thread_form, this.close.bind(this));\r\n    }\r\n    if (this.move_thread_form) {\r\n      submitIntercept(this.move_thread_form, this.move.bind(this));\r\n    }\r\n    if (this.delete_thread_form) {\r\n      submitIntercept(this.delete_thread_form, this.delete.bind(this));\r\n    }\r\n    //Listener for `reply to` buttons\r\n    document.querySelectorAll('.reply_to_button')\r\n            .forEach((item) => {\r\n              //Tracking click to be able to roll back change easily\r\n              (item as HTMLElement).addEventListener('click', (event: MouseEvent) => {\r\n                this.replyTo(event.target as HTMLInputElement);\r\n              });\r\n            });\r\n  }\r\n\r\n  private replyTo(button: HTMLInputElement): void {\r\n    //Get the post's ID\r\n    const reply_to = button.getAttribute('data-post_id') ?? '';\r\n    if (this.post_form && reply_to) {\r\n      this.post_form.replyTo(reply_to);\r\n    }\r\n  }\r\n\r\n  private addPost(): void {\r\n    if (this.add_post_form) {\r\n      const textarea = this.add_post_form.querySelector('textarea');\r\n      //Ensure we have the latest version of the text from TinyMCE instance\r\n      if (textarea && !empty(textarea.id)) {\r\n        saveTinyMCE(textarea.id, true);\r\n      }\r\n      //Get submit button\r\n      const button = this.add_post_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.add_post_form);\r\n      //Add time zone\r\n      form_data.append('post_data[timezone]', TIMEZONE);\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/posts`, form_data, 'json', 'POST', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (this.add_post_form) {\r\n              //Notify TinyMCE, that data was saved\r\n              if (textarea && !empty(textarea.id)) {\r\n                saveTinyMCE(textarea.id);\r\n              }\r\n            }\r\n            addSnackbar('Post created. Reloading...', 'success');\r\n            pageRefresh(data.location);\r\n          } else {\r\n            if (data.location) {\r\n              addSnackbar(data.reason + ` View the post <a href=\"${data.location}\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.`, 'failure', 0);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private move(): void {\r\n    if (this.move_thread_form) {\r\n      //Get submit button\r\n      const button = this.move_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.move_thread_form);\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            addSnackbar('Thread moved', 'success');\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private delete(): void {\r\n    if (this.delete_thread_form) {\r\n      if (confirm('This is the last chance to back out.\\nIf you press \\'OK\\' this thread will be permanently deleted.\\nPress \\'Cancel\\' to cancel the action.')) {\r\n        //Get submit button\r\n        const button = this.delete_thread_form.querySelector('input[type=submit]');\r\n        //Get form data\r\n        const form_data = new FormData(this.delete_thread_form);\r\n        buttonToggle(button as HTMLInputElement);\r\n        ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'DELETE', AJAX_TIMEOUT, true)\r\n          .then((response) => {\r\n            const data = response as ajaxJSONResponse;\r\n            if (data.data === true) {\r\n              addSnackbar('Thread removed. Redirecting to parent...', 'success');\r\n              pageRefresh(data.location);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n            buttonToggle(button as HTMLInputElement);\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  private close(): void {\r\n    if (this.closed_thread_form) {\r\n      //Get submit button\r\n      const button = this.closed_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.closed_thread_form);\r\n      //Get verb\r\n      let verb = form_data.get('verb') ?? 'close';\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (verb === 'open') {\r\n              addSnackbar('Thread marked as open', 'success');\r\n            } else {\r\n              addSnackbar('Thread marked as closed', 'success');\r\n            }\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private edit(): void {\r\n    if (this.edit_thread_form) {\r\n      //Get submit button\r\n      const button = this.edit_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.edit_thread_form);\r\n      //Check if custom icon is being attached\r\n      const og_image: HTMLInputElement | null = this.edit_thread_form.querySelector('input[type=file]');\r\n      if (og_image?.files?.[0]) {\r\n        form_data.append('thread_data[og_image]', 'true');\r\n      } else {\r\n        form_data.append('thread_data[og_image]', 'false');\r\n      }\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            addSnackbar('Thread updated. Reloading...', 'success');\r\n            pageRefresh();\r\n          } else {\r\n            if (data.location) {\r\n              addSnackbar(data.reason + ` View the thread <a href=\"${data.location}\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.`, 'failure', 0);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n            buttonToggle(button as HTMLInputElement);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private makePrivate(): void {\r\n    if (this.private_thread_form) {\r\n      //Get submit button\r\n      const button = this.private_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.private_thread_form);\r\n      //Get verb\r\n      let verb = form_data.get('verb') ?? 'mark_private';\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (verb === 'mark_public') {\r\n              addSnackbar('Thread marked as public', 'success');\r\n            } else {\r\n              addSnackbar('Thread marked as private', 'success');\r\n            }\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private pin(): void {\r\n    if (this.pin_thread_form) {\r\n      //Get submit button\r\n      const button = this.pin_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.pin_thread_form);\r\n      //Get verb\r\n      let verb = form_data.get('verb') ?? 'unpin';\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads/${String(form_data.get('thread_data[thread_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (verb === 'pin') {\r\n              addSnackbar('Thread pinned', 'success');\r\n            } else {\r\n              addSnackbar('Thread unpinned', 'success');\r\n            }\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n}\r\n"]}