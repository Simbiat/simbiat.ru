{"version":3,"file":"sections.js","sourceRoot":"/js/Pages/","sources":["talks/sections.ts"],"names":[],"mappings":"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","sourcesContent":["export class Sections {\r\n  private readonly add_section_form: HTMLFormElement | null = null;\r\n  private readonly add_thread_form: HTMLFormElement | null = null;\r\n  private readonly edit_section_form: HTMLFormElement | null = null;\r\n  private readonly private_section_form: HTMLFormElement | null = null;\r\n  private readonly closed_section_form: HTMLFormElement | null = null;\r\n  private readonly move_section_form: HTMLFormElement | null = null;\r\n  private readonly delete_section_form: HTMLFormElement | null = null;\r\n\r\n  public constructor() {\r\n    this.add_section_form = document.querySelector('#add_section_form');\r\n    this.add_thread_form = document.querySelector('#thread_form');\r\n    this.edit_section_form = document.querySelector('#edit_section_form');\r\n    this.private_section_form = document.querySelector('#section_private_form');\r\n    this.closed_section_form = document.querySelector('#section_closed_form');\r\n    this.move_section_form = document.querySelector('#section_move_form');\r\n    this.delete_section_form = document.querySelector('#section_delete_form');\r\n    if (this.add_section_form) {\r\n      submitIntercept(this.add_section_form, this.addSection.bind(this));\r\n    }\r\n    if (this.add_thread_form) {\r\n      submitIntercept(this.add_thread_form, this.addThread.bind(this));\r\n    }\r\n    if (this.edit_section_form) {\r\n      submitIntercept(this.edit_section_form, this.edit.bind(this));\r\n    }\r\n    if (this.private_section_form) {\r\n      submitIntercept(this.private_section_form, this.makePrivate.bind(this));\r\n    }\r\n    if (this.closed_section_form) {\r\n      submitIntercept(this.closed_section_form, this.close.bind(this));\r\n    }\r\n    if (this.move_section_form) {\r\n      submitIntercept(this.move_section_form, this.move.bind(this));\r\n    }\r\n    if (this.delete_section_form) {\r\n      submitIntercept(this.delete_section_form, this.delete.bind(this));\r\n    }\r\n  }\r\n\r\n  private makePrivate(): void {\r\n    if (this.private_section_form) {\r\n      //Get submit button\r\n      const button = this.private_section_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.private_section_form);\r\n      //Get verb\r\n      let verb = form_data.get('verb') ?? 'mark_private';\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/sections/${String(form_data.get('section_data[section_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (verb === 'mark_public') {\r\n              addSnackbar('Section marked as public', 'success');\r\n            } else {\r\n              addSnackbar('Section marked as private', 'success');\r\n            }\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private move(): void {\r\n    if (this.move_section_form) {\r\n      //Get submit button\r\n      const button = this.move_section_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.move_section_form);\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/sections/${String(form_data.get('section_data[section_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            addSnackbar('Section moved', 'success');\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private close(): void {\r\n    if (this.closed_section_form) {\r\n      //Get submit button\r\n      const button = this.closed_section_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.closed_section_form);\r\n      //Get verb\r\n      let verb = form_data.get('verb') ?? 'close';\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/sections/${String(form_data.get('section_data[section_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (verb === 'open') {\r\n              addSnackbar('Section marked as open', 'success');\r\n            } else {\r\n              addSnackbar('Section marked as closed', 'success');\r\n            }\r\n            pageRefresh();\r\n          } else {\r\n            addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private addSection(): void {\r\n    if (this.add_section_form) {\r\n      //Get submit button\r\n      const button = this.add_section_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.add_section_form);\r\n      //Check if custom icon is being attached\r\n      const icon: HTMLInputElement | null = this.add_section_form.querySelector('input[type=file]');\r\n      if (icon?.files?.[0]) {\r\n        form_data.append('section_data[icon]', 'true');\r\n      } else {\r\n        form_data.append('section_data[icon]', 'false');\r\n      }\r\n      //Add time zone\r\n      form_data.append('section_data[timezone]', TIMEZONE);\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/sections`, form_data, 'json', 'POST', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            addSnackbar('Section created. Reloading...', 'success');\r\n            pageRefresh();\r\n          } else {\r\n            if (data.location) {\r\n              addSnackbar(data.reason + ` View the section <a href=\"${data.location}\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.`, 'failure', 0);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n\r\n  private edit(): void {\r\n    if (this.edit_section_form) {\r\n      //Get submit button\r\n      const button = this.edit_section_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.edit_section_form);\r\n      //Check if custom icon is being attached\r\n      const icon: HTMLInputElement | null = this.edit_section_form.querySelector('input[type=file]');\r\n      if (icon?.files?.[0]) {\r\n        form_data.append('section_data[icon]', 'true');\r\n      } else {\r\n        form_data.append('section_data[icon]', 'false');\r\n      }\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/sections/${String(form_data.get('section_data[section_id]') ?? '0')}`, form_data, 'json', 'PATCH', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            addSnackbar('Section updated. Reloading...', 'success');\r\n            pageRefresh();\r\n          } else {\r\n            if (data.location) {\r\n              addSnackbar(data.reason + ` View the section <a href=\"${data.location}\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.`, 'failure', 0);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n            buttonToggle(button as HTMLInputElement);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private delete(): void {\r\n    if (this.delete_section_form) {\r\n      if (confirm('This is the last chance to back out.\\nIf you press \\'OK\\' this section will be permanently deleted.\\nPress \\'Cancel\\' to cancel the action.')) {\r\n        //Get submit button\r\n        const button = this.delete_section_form.querySelector('input[type=submit]');\r\n        //Get form data\r\n        const form_data = new FormData(this.delete_section_form);\r\n        buttonToggle(button as HTMLInputElement);\r\n        ajax(`${location.protocol}//${location.host}/api/talks/sections/${String(form_data.get('section_data[section_id]') ?? '0')}`, form_data, 'json', 'DELETE', AJAX_TIMEOUT, true)\r\n          .then((response) => {\r\n            const data = response as ajaxJSONResponse;\r\n            if (data.data === true) {\r\n              addSnackbar('Section removed. Redirecting to parent...', 'success');\r\n              pageRefresh(data.location);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n            buttonToggle(button as HTMLInputElement);\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  private addThread(): void {\r\n    if (this.add_thread_form) {\r\n      //Get submit button\r\n      const button = this.add_thread_form.querySelector('input[type=submit]');\r\n      //Get form data\r\n      const form_data = new FormData(this.add_thread_form);\r\n      //Check if custom icon is being attached\r\n      const og_image: HTMLInputElement | null = this.add_thread_form.querySelector('input[type=file]');\r\n      if (og_image?.files?.[0]) {\r\n        form_data.append('thread_data[og_image]', 'true');\r\n      } else {\r\n        form_data.append('thread_data[og_image]', 'false');\r\n      }\r\n      //Add time zone\r\n      form_data.append('thread_data[timezone]', TIMEZONE);\r\n      buttonToggle(button as HTMLInputElement);\r\n      ajax(`${location.protocol}//${location.host}/api/talks/threads`, form_data, 'json', 'POST', AJAX_TIMEOUT, true)\r\n        .then((response) => {\r\n          const data = response as ajaxJSONResponse;\r\n          if (data.data === true) {\r\n            if (this.add_thread_form) {\r\n              //Notify TinyMCE, that data was saved\r\n              const textarea = this.add_thread_form.querySelector('textarea');\r\n              if (textarea && !empty(textarea.id)) {\r\n                saveTinyMCE(textarea.id);\r\n              }\r\n            }\r\n            pageRefresh(data.location);\r\n          } else {\r\n            if (data.location) {\r\n              addSnackbar(data.reason + ` View the thread <a href=\"${data.location}\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.`, 'failure', 0);\r\n            } else {\r\n              addSnackbar(data.reason, 'failure', SNACKBAR_FAIL_LIFE);\r\n            }\r\n          }\r\n          buttonToggle(button as HTMLInputElement);\r\n        });\r\n    }\r\n  }\r\n}\r\n"]}