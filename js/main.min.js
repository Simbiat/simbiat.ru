"use strict";async function ajax(e,t=null,s="json",i="GET",n=6e4,a=!1){let r,o=new AbortController;setTimeout((()=>o.abort()),n);try{let n=await fetch(e,{method:i,mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"X-CSRF-Token":getMeta("X-CSRF-Token")??""},redirect:"error",referrer:window.location.href,referrerPolicy:"same-origin",keepalive:!1,signal:o.signal,body:["POST","PUT","DELETE","PATCH"].includes(i)?t:null});return n.ok||a?(r="json"===s?await n.json():"blob"===s?await n.blob():"array"===s?await n.arrayBuffer():"form"===s?await n.formData():await n.text(),r):(new Snackbar('Request to "'+e+'" returned code '+n.status,"failure",1e4),!1)}catch(t){"AbortError"===t.name?new Snackbar('Request to "'+e+'" timed out after '+n+" milliseconds","failure",1e4):new Snackbar('Request to "'+e+'" failed on fetch operation',"failure",1e4)}}function getMeta(e){let t=Array.from(document.getElementsByTagName("meta")).find((t=>t.name===e));return t?t.getAttribute("content"):null}function updateHistory(e,t){document.title!==t&&(document.title=t),document.location.href!==e&&window.history.pushState(t,t,e)}function submitIntercept(e,t){e.addEventListener("submit",(function(e){return e.preventDefault(),e.stopPropagation(),t(),!1})),e.addEventListener("keydown",(function(e){return"Enter"!==e.code||(e.preventDefault(),e.stopPropagation(),t(),!1)}))}function deleteRow(e){let t=e.closest("table"),s=e.closest("tr").rowIndex;return!(!t||!s)&&(t.deleteRow(s),!0)}function basename(e){return e.replace(/^.*\/|\.[^.]*$/g,"")}function buttonToggle(e,t=!0){let s;e.form&&(s=e.form.querySelector(".spinner")),s||(s=e.parentElement.querySelector(".spinner")),e.disabled?(t&&(e.disabled=!1),s&&s.classList.add("hidden")):(e.disabled=!0,s&&s.classList.remove("hidden"))}const pageTitle=" on Simbiat Software",emailRegex="[\\p{L}\\d.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z\\d](?:[a-zA-Z\\d\\-]{0,61}[a-zA-Z\\d])?(?:\\.[a-zA-Z\\d](?:[a-zA-Z\\d\\-]{0,61}[a-zA-Z\\d])?)*",userRegex="^[\\p{L}\\d.!#$%&'*+\\\\/=?^_`{|}~\\- ]{1,64}$";function init(){new Input,new Textarea,new Form,new Details,new Quotes,new Aside,new Nav,new Headings,customElements.define("back-to-top",BackToTop),customElements.define("time-r",Timer),customElements.define("web-share",WebShare),customElements.define("tool-tip",Tooltip),customElements.define("snack-close",SnackbarClose),customElements.define("gallery-overlay",Gallery),customElements.define("image-carousel",CarouselList),customElements.define("password-show",PasswordShow),customElements.define("password-requirements",PasswordRequirements),customElements.define("password-strength",PasswordStrength),customElements.define("like-dis",Likedis),new A,cleanGET(),hashCheck(),router(),document.querySelectorAll("textarea.tinymce").length>0&&import("/js/tinymce/tinymce.min.js").then((()=>{tinymce.init(tinySettings)}))}document.addEventListener("DOMContentLoaded",init),window.addEventListener("hashchange",(function(){hashCheck()}));const customColorMap={"#F5F0F0":"text","#9AD4EA":"interactive","#8AE59C":"success","#F3A0B6":"failure","#E6B63D":"warning","#808080":"disabled","#19424D":"dark-border","#266373":"light-border","#2E293D":"article","#231F2E":"block","#17141F":"body"},tinySettings={selector:"textarea.tinymce",relative_urls:!1,remove_script_host:!0,base_url:"/js/tinymce/",document_base_url:window.location.protocol+"//"+window.location.hostname+"/",referrer_policy:"no-referer",content_security_policy:"default-src 'self'",skin:"oxide-dark",content_css:"/css/tinymce.css",hidden_input:!1,readonly:!1,block_formats:"Paragraph=p; Heading 2=h2; Heading 3=h3; Heading 4=h4; Heading 5=h5; Heading 6=h6;",branding:!0,plugins:"autolink autosave charmap code emoticons fullscreen help image insertdatetime link lists media preview quickbars searchreplace table visualblocks visualchars wordcount",contextmenu:"emoticons link image",table_toolbar:"tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol | tabledelete",quickbars_insert_toolbar:!1,font_formats:"",fontsize_formats:"",lineheight_formats:"",menu:{file:{title:"File",items:"newdocument restoredraft"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code preview | visualaid visualchars visualblocks | fullscreen"},format:{title:"Format",items:"underline strikethrough superscript subscript | align"},insert:{title:"Insert",items:"link image media codeformat | emoticons charmap hr | insertdatetime"},table:{title:"Table",items:"inserttable | cell row column | deletetable"},help:{title:"Help",items:"help wordcount"}},valid_styles:{},menubar:"file edit view format insert table help",toolbar:"undo redo | blocks | bold italic | forecolor backcolor | blockquote bullist numlist | removeformat",theme_advanced_default_foreground_color:"#F5F0F0",style_formats:[],toolbar_mode:"wrap",custom_colors:!1,color_map:Object.keys(customColorMap).map((function(e){return[e,customColorMap[e]]})).flat(),formats:{forecolor:{inline:"span",attributes:{class:e=>"tiny-color-"+customColorMap[e.value]},remove:"none"},hilitecolor:{inline:"span",remove:"none",attributes:{class:e=>"tiny-bg-color-"+customColorMap[e.value]}},underline:{inline:"span",classes:"tiny-underline",remove:"none"},alignleft:{selector:"strong,em,sub,sup,s,a,time,p,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,audio,video",classes:"tiny-align-left",remove:"none"},alignright:{selector:"strong,em,sub,sup,s,a,time,p,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,audio,video",classes:"tiny-align-right",remove:"none"},aligncenter:{selector:"strong,em,sub,sup,s,a,time,p,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,audio,video",classes:"tiny-align-center",remove:"none"},alignjustify:{selector:"strong,em,sub,sup,s,a,time,p,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img,audio,video",classes:"tiny-align-justify",remove:"none"},valigntop:{selector:"td,th,table",classes:"tiny-valign-top",remove:"none"},valignmiddle:{selector:"td,th,table",classes:"tiny-valign-middle",remove:"none"},valignbottom:{selector:"td,th,table",classes:"tiny-valign-bottom",remove:"none"}},visual:!0,entity_encoding:"numeric",invalid_styles:"font-size line-height",schema:"html5-strict",browser_spellcheck:!0,resize_img_proportional:!0,link_default_protocol:"https",autosave_restore_when_empty:!0,emoticons_database:"emojis",image_caption:!0,image_advtab:!1,image_title:!0,image_description:!0,image_uploadtab:!0,images_file_types:"jpeg,jpg,png,gif,bmp,webp",images_upload_credentials:!0,images_reuse_filename:!0,images_upload_url:"/api/upload/",paste_data_images:!1,paste_remove_styles_if_webkit:!0,paste_webkit_styles:"none",image_class_list:[{title:"None",value:"w25pc middle block"},{title:"Fullwidth",value:"w100pc middle block"},{title:"Icon",value:"linkIcon"}],automatic_uploads:!0,remove_trailing_brs:!0,file_picker_types:"image",block_unsupported_drop:!0,image_dimensions:!1,insertdatetime_element:!0,link_target_list:[{title:"New window",value:"_blank"},{title:"Current window",value:"_self"}],default_link_target:"_blank",link_assume_external_targets:"https",link_context_toolbar:!0,paste_block_drop:!1,visualblocks_default_state:!1,lists_indent_on_tab:!0,promotion:!1,table_appearance_options:!1,table_border_widths:[{title:"default",value:"0.125rem"}],table_border_styles:[{title:"Solid",value:"solid"}],table_advtab:!1,table_cell_advtab:!1,table_row_advtab:!1,table_style_by_css:!1,object_resizing:!1,link_title:!1};function cleanGET(){let e=new URL(document.location.href),t=new URLSearchParams(e.search);t.delete("cacheReset"),""===t.toString()?window.history.replaceState(document.title,document.title,location.pathname+location.hash):window.history.replaceState(document.title,document.title,"?"+t+location.hash)}function hashCheck(){let e=new URL(document.location.href).hash,t=document.querySelector("gallery-overlay");const s=new RegExp("#gallery=\\d+","ui");if(t)if(s.test(e)){let s=Number(e.replace(/(#gallery=)(\d+)/iu,"$2"));s&&(t.images[s-1]?t.current=s-1:(new Snackbar("Image number "+s+" not found on page","failure"),window.history.replaceState(document.title,document.title,document.location.href.replace(e,""))))}else t.close()}function router(){let e=new URL(document.location.href).pathname.replace(/(\/)(.*)(\/)?/iu,"$2").toLowerCase().split("/");e[0]&&("bictracker"===e[0]?e[1]&&("keying"===e[1]?import("/js/Pages/bictracker/keying.js").then((e=>{new e.bicKeying})):"search"===e[1]&&import("/js/Pages/bictracker/search.js").then((e=>{new e.bicRefresh}))):"fftracker"===e[0]?e[1]&&("track"===e[1]?import("/js/Pages/fftracker/track.js").then((e=>{new e.ffTrack})):["characters","freecompanies","linkshells","crossworldlinkshells","crossworld_linkshells","pvpteams"].includes(e[1])&&import("/js/Pages/fftracker/entity.js").then((e=>{new e.ffEntity}))):"uc"===e[0]&&e[1]&&("emails"===e[1]?import("/js/Pages/uc/emails.js").then((e=>{new e.Emails})):"password"===e[1]?import("/js/Pages/uc/password.js").then((e=>{new e.PasswordChange})):"profile"===e[1]?import("/js/Pages/uc/profile.js").then((e=>{new e.EditProfile})):"avatars"===e[1]?import("/js/Pages/uc/avatars.js").then((e=>{new e.EditAvatars})):"sessions"===e[1]?import("/js/Pages/uc/sessions.js").then((e=>{new e.EditSessions})):"fftracker"===e[1]?import("/js/Pages/uc/fftracker.js").then((e=>{new e.EditFFLinks})):"removal"===e[1]&&import("/js/Pages/uc/removal.js").then((e=>{new e.RemoveProfile}))))}class BackToTop extends HTMLElement{static content;static BTTs;constructor(){super(),BackToTop.content||(BackToTop.content=document.getElementById("content"),BackToTop.BTTs=Array.from(document.getElementsByTagName("back-to-top")),BackToTop.content.addEventListener("scroll",this.toggleButtons.bind(this))),this.addEventListener("click",(()=>{BackToTop.content.scrollTop=0}))}toggleButtons(){BackToTop.BTTs&&(0===BackToTop.content.scrollTop?BackToTop.BTTs.forEach((e=>{e.classList.add("hidden")})):BackToTop.BTTs.forEach((e=>{e.classList.remove("hidden")})))}}class Gallery extends HTMLElement{_current=0;images=[];get current(){return this._current}set current(e){e<0?this._current=this.images.length-1:e>this.images.length-1?this._current=0:this._current=e,(this.images.length>1||this.classList.contains("hidden"))&&this.open()}constructor(){super(),this.images=Array.from(document.querySelectorAll(".galleryZoom")),this.images.length>0&&(customElements.define("gallery-close",GalleryClose),customElements.define("gallery-prev",GalleryPrev),customElements.define("gallery-next",GalleryNext),customElements.define("gallery-image",GalleryImage),this.images.forEach(((e,t)=>{e.addEventListener("click",(e=>(e.preventDefault(),e.stopPropagation(),this.current=t,!1)))})),this.addEventListener("keydown",this.keyNav.bind(this)))}open(){this.tabIndex=99;let e=this.images[this.current],t=e.querySelector("img");t.classList.remove("zoomedIn");let s=e.parentElement.querySelector("figcaption"),i=e.getAttribute("data-tooltip")??e.getAttribute("title")??t.getAttribute("alt")??e.href.replace(/^.*[\\\/]/u,"");document.getElementById("galleryName").innerHTML=s?s.innerHTML:i,document.getElementById("galleryNameLink").href=document.getElementById("galleryLoadedImage").src=e.href,document.getElementById("galleryTotal").innerText=this.images.length.toString(),document.getElementById("galleryCurrent").innerText=(this.current+1).toString(),this.classList.remove("hidden"),this.history(),this.focus()}close(){this.tabIndex=-1,this.classList.add("hidden"),this.history(),document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0].focus()}previous(){this.current--}next(){this.current++}keyNav(e){return e.stopPropagation(),["ArrowDown","ArrowRight","PageDown"].includes(e.code)?(this.next(),!1):["ArrowUp","ArrowLeft","PageUp"].includes(e.code)?(this.previous(),!1):"End"===e.code?(this.current=this.images.length-1,!1):"Home"===e.code?(this.current=0,!1):!["Escape","Backspace"].includes(e.code)||(this.close(),!1)}history(){const e=new URL(document.location.href),t=(this.current+1).toString(),s=new RegExp("(.+"+pageTitle+")(, Image \\d+)?","ui");let i,n;this.classList.contains("hidden")?(n=document.title.replace(/(.*)(, Image )(\d+)/iu,"$1"),i=document.location.href.replace(e.hash,"")):(n=document.title.replace(s,"$1, Image "+t),i=document.location.href.replace(/([^#]+)((#gallery=\d+)|$)/iu,"$1#gallery="+t)),e!==new URL(i)&&updateHistory(i,n)}}class GalleryImage extends HTMLElement{image;zoomListener;constructor(){super(),this.image=document.getElementById("galleryLoadedImage"),this.zoomListener=this.zoom.bind(this),this.image.addEventListener("load",this.checkZoom.bind(this))}checkZoom(){this.image.classList.remove("zoomedIn"),this.image.naturalHeight<=this.image.height?(this.image.removeEventListener("click",this.zoomListener),this.image.classList.add("noZoom")):(this.image.classList.remove("noZoom"),this.image.addEventListener("click",this.zoomListener))}zoom(){this.image.classList.contains("zoomedIn")?this.image.classList.remove("zoomedIn"):this.image.classList.add("zoomedIn")}}class GalleryPrev extends HTMLElement{overlay;constructor(){super(),this.overlay=document.querySelector("gallery-overlay"),this.overlay.images.length>1?this.addEventListener("click",(()=>{this.overlay.previous()})):this.classList.add("disabled")}}class GalleryNext extends HTMLElement{overlay;constructor(){super(),this.overlay=document.querySelector("gallery-overlay"),this.overlay.images.length>1?this.addEventListener("click",(()=>{this.overlay.next()})):this.classList.add("disabled")}}class GalleryClose extends HTMLElement{constructor(){super(),this.addEventListener("click",(()=>{document.querySelector("gallery-overlay").close()}))}}class CarouselList extends HTMLElement{list;next;previous;maxScroll=0;constructor(){super(),this.list=this.querySelector(".imageCarouselList"),this.next=this.querySelector(".imageCarouselNext"),this.previous=this.querySelector(".imageCarouselPrev"),this.list&&this.next&&this.previous&&(this.maxScroll=this.list.scrollWidth-this.list.offsetWidth,this.list.addEventListener("scroll",(()=>{this.disableScroll()})),[this.next,this.previous].forEach((e=>{e.addEventListener("click",(e=>{this.toScroll(e)}))})),this.disableScroll())}toScroll(e){let t=e.target,s=this.list.querySelector("img").width;t.classList.contains("imageCarouselPrev")?this.list.scrollLeft-=s:this.list.scrollLeft+=s,this.disableScroll()}disableScroll(){0===this.list.scrollLeft?this.previous.classList.add("disabled"):this.previous.classList.remove("disabled"),this.list.scrollLeft>=this.maxScroll?this.next.classList.add("disabled"):this.next.classList.remove("disabled")}}class Likedis extends HTMLElement{postId=0;likeValue=0;likesCount;dislikesCount;likeButton;dislikeButton;constructor(){super(),this.likeValue=Number(this.getAttribute("data-liked")??0),this.postId=Number(this.getAttribute("data-postid")??0),this.likesCount=this.querySelector(".likes_count"),this.dislikesCount=this.querySelector(".dislikes_count"),this.likeButton=this.querySelector(".like_button"),this.dislikeButton=this.querySelector(".dislike_button"),this.likeButton.addEventListener("click",this.like.bind(this)),this.dislikeButton.addEventListener("click",this.like.bind(this))}like(e){let t,s=e.target;t=s.classList.contains("like_button")?"like":"dislike",0!==this.postId?(buttonToggle(s),ajax(location.protocol+"//"+location.host+"/api/talks/posts/"+this.postId+"/"+t+"/",null,"json","PUT",6e4,!0).then((e=>{0===e.data||1===e.data||-1===e.data?this.updateCounts(e.data):new Snackbar(e.reason,"failure",1e4),buttonToggle(s)}))):new Snackbar("No post ID","failure",1e4)}updateCounts(e){this.likesCount.classList.remove("success"),this.dislikesCount.classList.remove("failure"),0===e?(1===this.likeValue?this.likesCount.innerHTML=String(Number(this.likesCount.innerHTML)-1):-1===this.likeValue&&(this.dislikesCount.innerHTML=String(Number(this.dislikesCount.innerHTML)-1)),this.likeButton.setAttribute("data-tooltip","Like"),this.dislikeButton.setAttribute("data-tooltip","Dislike")):1===e?(-1===this.likeValue&&(this.dislikesCount.innerHTML=String(Number(this.dislikesCount.innerHTML)-1)),this.likesCount.innerHTML=String(Number(this.likesCount.innerHTML)+1),this.likesCount.classList.add("success"),this.likeButton.setAttribute("data-tooltip","Remove like"),this.dislikeButton.setAttribute("data-tooltip","Dislike")):-1===e&&(1===this.likeValue&&(this.likesCount.innerHTML=String(Number(this.likesCount.innerHTML)-1)),this.dislikesCount.innerHTML=String(Number(this.dislikesCount.innerHTML)+1),this.dislikesCount.classList.add("failure"),this.likeButton.setAttribute("data-tooltip","Like"),this.dislikeButton.setAttribute("data-tooltip","Remove dislike")),Number(this.likesCount.innerHTML)<0&&(this.likesCount.innerHTML="0"),Number(this.dislikesCount.innerHTML)<0&&(this.dislikesCount.innerHTML="0"),this.setAttribute("data-liked",String(e)),this.likeValue=e}}class PasswordShow extends HTMLElement{passwordInput;constructor(){super(),this.passwordInput=this.parentElement.querySelector("input"),this.addEventListener("click",this.toggle)}toggle(e){e.preventDefault(),"password"===this.passwordInput.type?(this.passwordInput.type="text",this.title="Hide password"):(this.passwordInput.type="password",this.title="Show password")}}class PasswordRequirements extends HTMLElement{passwordInput;constructor(){super(),this.classList.add("hidden"),this.innerHTML="Only password requirement: at least 8 symbols",this.passwordInput=this.parentElement.querySelector("input"),this.passwordInput.addEventListener("focus",this.show.bind(this)),this.passwordInput.addEventListener("focusout",this.hide.bind(this)),["focus","change","input"].forEach((e=>{this.passwordInput.addEventListener(e,this.validate.bind(this))}))}validate(){this.passwordInput.validity.valid?(this.classList.remove("error"),this.classList.add("success")):(this.classList.add("error"),this.classList.remove("success"))}show(){"new-password"===(this.passwordInput.getAttribute("autocomplete")??null)?this.classList.remove("hidden"):this.classList.add("hidden")}hide(){this.classList.add("hidden")}}class PasswordStrength extends HTMLElement{passwordInput;strengthSpan;constructor(){super(),this.classList.add("hidden"),this.innerHTML='New password strength: <span class="password_strength">weak</span>',this.passwordInput=this.parentElement.querySelector("input"),this.strengthSpan=this.querySelector("span"),this.passwordInput.addEventListener("focus",this.show.bind(this)),this.passwordInput.addEventListener("focusout",this.hide.bind(this)),["focus","change","input"].forEach((e=>{this.passwordInput.addEventListener(e,this.calculate.bind(this))}))}calculate(){let e,t=this.passwordInput.value,s=0;return/.{8,}/u.test(t)&&s++,/.{16,}/u.test(t)&&s++,/.{32,}/u.test(t)&&s++,/.{64,}/u.test(t)&&s++,/\p{Ll}/u.test(t)&&s++,/\p{Lu}/u.test(t)&&s++,/\p{Lo}/u.test(t)&&s++,/\p{N}/u.test(t)&&s++,/[\p{P}\p{S}]/u.test(t)&&s++,/(.)\1{2,}/u.test(t)&&s--,e=s<=2?"weak":2<s&&s<5?"medium":5===s?"strong":"very strong",this.strengthSpan.innerHTML=e,this.strengthSpan.classList.remove("password_weak","password_medium","password_strong","password_very_strong"),"very strong"===e?this.strengthSpan.classList.add("password_very_strong"):this.strengthSpan.classList.add("password_"+e),e}show(){"new-password"===(this.passwordInput.getAttribute("autocomplete")??null)?this.classList.remove("hidden"):this.classList.add("hidden")}hide(){this.classList.add("hidden")}}class Snackbar{snacks;static notificationIndex=0;constructor(e,t="",s=3e3){if(this.snacks=document.querySelector("snack-bar"),this.snacks){let i=document.querySelector("#snackbar_template").content.cloneNode(!0),n=Snackbar.notificationIndex++,a=i.querySelector("dialog");a.setAttribute("id","snackbar"+n),a.querySelector(".snack_text").innerHTML=e,a.querySelector("snack-close").setAttribute("data-close-in",String(s)),a.querySelectorAll('a[target="_blank"]').forEach((e=>{(new A).newTabStyle(e)})),t&&a.classList.add(t),this.snacks.appendChild(a),a.classList.add("fadeIn")}}}class SnackbarClose extends HTMLElement{snackbar;snack;constructor(){super(),this.snack=this.parentElement,this.snackbar=document.querySelector("snack-bar"),this.addEventListener("click",this.close);let e=parseInt(this.getAttribute("data-close-in")??"0");e>0&&setTimeout((()=>{this.close()}),e)}close(){this.snack.classList.remove("fadeIn"),this.snack.classList.add("fadeOut"),this.snack.addEventListener("animationend",(()=>{this.snack&&this.snackbar.removeChild(this.snack)}))}}class Timer extends HTMLElement{interval=null;constructor(){super(),this.interval=setInterval((()=>{parseInt(this.innerHTML)>0||Boolean(this.getAttribute("data-negative"))?Boolean(this.getAttribute("data-increase"))?this.innerHTML=String(parseInt(this.innerHTML)+1):this.innerHTML=String(parseInt(this.innerHTML)-1):(clearInterval(Number(this.interval)),"refresh_timer"===this.id&&location.reload())}),1e3)}}class Tooltip extends HTMLElement{x=0;y=0;constructor(){super(),document.querySelectorAll('[alt]:not([alt=""]):not([data-tooltip]), [title]:not([title=""]):not([data-tooltip])').forEach((e=>{e.parentElement.hasAttribute("data-tooltip")||e.setAttribute("data-tooltip",e.getAttribute("alt")??e.getAttribute("title")??"")})),document.querySelectorAll("[data-tooltip]:not([tabindex])").forEach((e=>{e.setAttribute("tabindex","0")})),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.querySelectorAll('[data-tooltip]:not([data-tooltip=""])').forEach((e=>{e.addEventListener("focus",this.onFocus.bind(this))})),document.querySelectorAll(":not([data-tooltip])").forEach((e=>{e.addEventListener("focus",(()=>{this.removeAttribute("data-tooltip")}))}))}onMouseMove(e){this.update(e.target),this.x=e.clientX,this.y=e.clientY,this.tooltipCursor()}onFocus(e){this.update(e.target);let t=e.target.getBoundingClientRect();this.x=t.x,this.y=t.y-1.5*this.offsetHeight,this.tooltipCursor()}tooltipCursor(){this.y+this.offsetHeight>window.innerHeight&&(this.y=window.innerHeight-2*this.offsetHeight),this.x+this.offsetWidth>window.innerWidth&&(this.x=window.innerWidth-1.5*this.offsetWidth),document.documentElement.style.setProperty("--cursorX",this.x+"px"),document.documentElement.style.setProperty("--cursorY",this.y+"px")}update(e){let t=e.parentElement,s=e.getAttribute("data-tooltip")??t.getAttribute("data-tooltip")??null;s&&e!==this&&matchMedia("(pointer:fine)").matches?(this.setAttribute("data-tooltip","true"),this.innerHTML=s):(this.removeAttribute("data-tooltip"),this.innerHTML="")}}class WebShare extends HTMLElement{constructor(){super(),void 0!==navigator.share?(this.classList.remove("hidden"),this.addEventListener("click",this.share)):this.classList.add("hidden")}share(){return navigator.share({title:document.title,text:getMeta("og:description")??getMeta("description")??"",url:document.location.href})}}class A{static _instance=null;constructor(){if(A._instance)return A._instance;document.querySelectorAll('a[target="_blank"]').forEach((e=>{this.newTabStyle(e)})),A._instance=this}newTabStyle(e){e.innerHTML.includes("img/newtab.svg")||e.classList.contains("galleryZoom")||e.classList.contains("footerLink")||(e.innerHTML+='<img class="newTabIcon" src="/img/newtab.svg" alt="Opens in new tab">')}}class Aside{static _instance=null;sidebarDiv=null;loginForm=null;constructor(){if(Aside._instance)return Aside._instance;this.sidebarDiv=document.getElementById("sidebar");let e=document.getElementById("showSidebar"),t=document.getElementById("hideSidebar");e&&e.addEventListener("click",(()=>{this.sidebarDiv.classList.add("shown")})),t&&t.addEventListener("click",(()=>{this.sidebarDiv.classList.remove("shown")})),this.loginForm=document.getElementById("signinup"),this.loginForm&&(this.loginForm.querySelectorAll("#radio_signinup input[type=radio]").forEach((e=>{e.addEventListener("change",this.loginRadioCheck)})),this.loginRadioCheck(),submitIntercept(this.loginForm,this.singInUpSubmit.bind(this))),Aside._instance=this}singInUpSubmit(){if(this.loginForm){let e=new FormData(this.loginForm);e.get("signinup[type]")||e.set("signinup[type]","logout"),e.set("signinup[timezone]",Intl.DateTimeFormat().resolvedOptions().timeZone);let t=this.loginForm.querySelector("#signinup_submit");buttonToggle(t),ajax(location.protocol+"//"+location.host+"/api/uc/"+e.get("signinup[type]")+"/",e,"json","POST",6e4,!0).then((s=>{!0===s.data?"remind"===e.get("signinup[type]")?new Snackbar("If respective account is registered an email has been sent with password reset link.","success"):location.reload():new Snackbar(s.reason,"failure",1e4),buttonToggle(t)}))}}loginRadioCheck(){let e,t=document.getElementById("radio_existuser"),s=document.getElementById("radio_newuser"),i=document.getElementById("radio_forget"),n=document.getElementById("signinup_email");n&&n.labels&&(e=n.labels[0]);let a=document.getElementById("signinup_password"),r=document.getElementById("signinup_submit"),o=document.getElementById("rememberme"),l=document.getElementById("signinup_username");t&&t.checked&&(a.required=!0,a.setAttribute("autocomplete","current-password"),n.setAttribute("type","email"),n.setAttribute("autocomplete","email"),n.setAttribute("pattern","^"+emailRegex+"$"),a.setAttribute("minlength","8"),r.value="Sign in",a.parentElement.classList.remove("hidden"),o.parentElement.classList.remove("hidden"),l.parentElement.classList.add("hidden"),l.required=!1),s&&s.checked&&(a.required=!0,a.setAttribute("autocomplete","new-password"),n.setAttribute("type","email"),n.setAttribute("autocomplete","email"),n.setAttribute("pattern","^"+emailRegex+"$"),a.setAttribute("minlength","8"),r.value="Join",a.parentElement.classList.remove("hidden"),o.parentElement.classList.remove("hidden"),n.placeholder="Email",e&&(e.innerHTML="Email"),l.parentElement.classList.remove("hidden"),l.required=!0),i&&i.checked&&(a.required=!1,a.removeAttribute("autocomplete"),n.setAttribute("type","text"),n.setAttribute("autocomplete","username"),n.setAttribute("pattern","^("+userRegex+")|("+emailRegex+")$"),a.removeAttribute("minlength"),r.value="Remind",a.parentElement.classList.add("hidden"),o.parentElement.classList.add("hidden"),o.checked=!1,n.placeholder="Email or name",e&&(e.innerHTML="Email or name"),l.parentElement.classList.add("hidden"),l.required=!1),a&&(new Input).ariaNation(a)}}class Details{static list;static _instance=null;constructor(){if(Details._instance)return Details._instance;Details.list=Array.from(document.getElementsByTagName("details")),Details.list.forEach(((e,t,s)=>{e.ontoggle=t=>{e.open&&!e.classList.contains("persistent")&&s.forEach((t=>{t===e||t.classList.contains("persistent")||(t.open=!1)}))}})),Details.list.forEach((e=>{e.addEventListener("click",(e=>{this.reset(e.target)}))})),Details._instance=this}reset(e){Details.list.forEach((t=>{t.open&&t!==e&&!t.contains(e)?t.open=!1:t.classList.contains("popup")&&document.addEventListener("click",(e=>{this.clickOutsideDetails(e,t)}))}))}clickOutsideDetails(e,t){t===e.target||t.contains(e.target)||(t.open=!1,document.removeEventListener("click",(e=>{this.clickOutsideDetails(e,t)})))}}class Form{static _instance=null;constructor(){if(Form._instance)return Form._instance;document.querySelectorAll("form").forEach((e=>{e.addEventListener("keypress",(e=>{this.formEnter(e)}))})),document.querySelectorAll('form input[type="email"], form input[type="password"], form input[type="search"], form input[type="tel"], form input[type="text"], form input[type="url"]').forEach((e=>{e.addEventListener("keydown",this.inputBackSpace.bind(this)),e.getAttribute("maxlength")&&(e.addEventListener("input",this.autoNext.bind(this)),e.addEventListener("change",this.autoNext.bind(this)),e.addEventListener("paste",this.pasteSplit.bind(this)))})),Form._instance=this}formEnter(e){let t=e.target.form;if(("Enter"===e.code||"NumpadEnter"===e.code)&&!t.action)return e.stopPropagation(),e.preventDefault(),!1}rawurlencode(e){return e+="",encodeURIComponent(e).replace(/!/gu,"%21").replace(/'/gu,"%27").replace(/\(/gu,"%28").replace(/\)/gu,"%29").replace(/\*/gu,"%2A")}inputBackSpace(e){let t=e.target;if("Backspace"===e.code&&!t.value){let e=this.nextInput(t,!0);e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)}}autoNext(e){let t=e.target,s=parseInt(t.getAttribute("maxlength")??"0");if(s&&t.value.length===s&&t.validity.valid){let e=this.nextInput(t,!1);e&&e.focus()}}nextInput(e,t=!1){let s=e.form;if(s){let i;for(let n of s.querySelectorAll('input[type="email"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="url"]')){if(t){if(n===e)return i||!1}else if(i&&i===e)return n;i=n}}return!1}async pasteSplit(e){let t=await navigator.permissions.query({name:"clipboard-read"}).catch((()=>{console.error("Your browser does not support clipboard-read permission.")}));t&&"denied"!==t.state&&navigator.clipboard.readText().then((t=>{let s=t.toString(),i=e.target,n=parseInt(i.getAttribute("maxlength")??"0");for(;i&&n&&s.length>n;){if(i.value=s.substring(0,n),i.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),!i.validity.valid)return!1;s=s.substring(n),i=this.nextInput(i,!1),i&&(i.focus(),n=parseInt(i.getAttribute("maxlength")??"0"))}return i&&(i.value=s,i.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))),!0}))}}class Headings{static _instance=null;constructor(){if(Headings._instance)return Headings._instance;document.querySelectorAll("h1:not(#h1title), h2, h3, h4, h5, h6").forEach((e=>{if(!e.hasAttribute("id")){let t=String(e.textContent).replaceAll(/\s/gmu,"_").replaceAll(/[^\p{L}\p{N}_\-]/gmu,"").replaceAll(/(^.{1,64})(.*$)/gmu,"$1"),s=1,i=t;for(;document.getElementById(i);)s++,i=t+"_"+s;e.setAttribute("id",i)}e.addEventListener("click",(e=>{this.copyLink(e.target)}))})),Headings._instance=this}copyLink(e){if("Range"!==window.getSelection().type){let t=window.location.href.replaceAll(/(^[^#]*)(#.*)?$/gmu,"$1")+"#"+e.getAttribute("id");return navigator.clipboard.writeText(t).then((function(){new Snackbar('Anchor link for "'+e.textContent+'" copied to clipboard',"success")}),(function(){new Snackbar('Failed to copy anchor link for "'+e.textContent+'"',"failure")})),t}return""}}class Input{static _instance=null;constructor(){if(Input._instance)return Input._instance;Array.from(document.getElementsByTagName("input")).forEach((e=>{this.init(e)})),Input._instance=this}init(e){e.addEventListener("focus",(()=>{this.ariaNation(e)})),e.addEventListener("change",(()=>{this.ariaNation(e)})),e.addEventListener("input",(()=>{this.ariaNation(e)})),this.ariaNation(e)}ariaNation(e){e.setAttribute("aria-invalid",String(!e.validity.valid)),e.hasAttribute("placeholder")||e.setAttribute("placeholder",e.value||e.type||"placeholder"),e.getAttribute("type")||e.setAttribute("type","text");let t=e.type??e.getAttribute("type")??"text";["text","search","url","tel","email","password","date","month","week","time","datetime-local","number","checkbox","radio","file"].includes(String(t))&&(e.required?e.setAttribute("aria-required",String(!0)):e.setAttribute("aria-required",String(!1))),"checkbox"===t&&(e.setAttribute("role","checkbox"),e.setAttribute("aria-checked",String(e.checked)),e.indeterminate&&e.setAttribute("aria-checked","mixed")),"checkbox"===t&&e.setAttribute("value",e.value)}}class Nav{static _instance=null;navDiv=null;constructor(){if(Nav._instance)return Nav._instance;this.navDiv=document.getElementById("navigation");let e=document.getElementById("showNav"),t=document.getElementById("hideNav");e&&e.addEventListener("click",(()=>{this.navDiv.classList.add("shown")})),t&&t.addEventListener("click",(()=>{this.navDiv.classList.remove("shown")})),Nav._instance=this}}class Quotes{static _instance=null;constructor(){if(Quotes._instance)return Quotes._instance;document.querySelectorAll("samp, code, blockquote").forEach((e=>{e.innerHTML='<img loading="lazy" decoding="async"  src="/img/copy.svg" alt="Click to copy block" class="copyQuote">'+e.innerHTML})),document.querySelectorAll("blockquote[data-author]").forEach((e=>{e.innerHTML='<span class="quoteAuthor">'+e.getAttribute("data-author")+"</span>"+e.innerHTML})),document.querySelectorAll("samp[data-description], code[data-description]").forEach((e=>{e.innerHTML='<span class="codeDesc">'+e.getAttribute("data-description")+"</span>"+e.innerHTML})),document.querySelectorAll("blockquote[data-source], samp[data-source], code[data-source]").forEach((e=>{e.innerHTML=e.innerHTML+'<span class="quoteSource">'+e.getAttribute("data-source")+"</span>"})),Array.from(document.getElementsByTagName("q")).forEach((e=>{e.setAttribute("data-tooltip","Click to copy quote")})),document.querySelectorAll(".copyQuote, q").forEach((e=>{e.addEventListener("click",(e=>{this.copy(e.target)}))})),Quotes._instance=this}copy(e){let t;switch("q"!==e.tagName.toLowerCase()&&(e=e.parentElement),e.tagName.toLowerCase()){case"samp":t="Sample";break;case"code":t="Code";break;case"blockquote":case"q":t="Quote"}let s=e.tagName.toLowerCase(),i=String(e.textContent);if("blockquote"===s&&e.hasAttribute("data-author")){let t=new RegExp("^("+e.getAttribute("data-author")+":)","ui");i=i.replace(t,"")}if(("samp"===s||"code"===s)&&e.hasAttribute("data-description")){let t=new RegExp("^("+e.getAttribute("data-description")+":)","ui");i=i.replace(t,"")}if(("blockquote"===s||"samp"===s||"code"===s)&&e.hasAttribute("data-source")){let t=new RegExp("("+e.getAttribute("data-source")+")$","ui");i=i.replace(t,"")}return navigator.clipboard.writeText(i).then((function(){new Snackbar(t+" copied to clipboard","success")}),(function(){new Snackbar("Failed to copy "+t.toLowerCase(),"failure")})),String(e.textContent)}}class Textarea{static _instance=null;constructor(){if(Textarea._instance)return Textarea._instance;Array.from(document.getElementsByTagName("textarea")).forEach((e=>{e.hasAttribute("placeholder")||e.setAttribute("placeholder",e.value||e.type||"placeholder")})),Textarea._instance=this}}
//# sourceMappingURL=main.min.js.map