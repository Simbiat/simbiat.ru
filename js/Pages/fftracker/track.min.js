export class ffTrack{select;idInput;constructor(){this.idInput=document.getElementById("ff_track_id"),this.select=document.getElementById("ff_track_type"),this.select.addEventListener("change",(()=>{this.typeChange()})),submitIntercept(document.getElementById("ff_track_register"),this.add.bind(this))}add(){let e,t=this.select.selectedOptions[0];if(e=t?t.text:"Character",this.idInput&&this.select){let t=document.getElementById("ff_track_spinner");t.classList.remove("hidden"),ajax(location.protocol+"//"+location.host+"/api/fftracker/"+this.select.value+"/"+this.idInput.value+"/",null,"json","POST",6e4,!0).then((a=>{!0===a.data?new Snackbar(e+" with ID "+this.idInput.value+' was registered. Check <a href="'+location.protocol+"//"+location.host+"/fftracker/"+this.select.value+"/"+this.idInput.value+'/" target="_blank">here</a>.',"success",0):"404"===a?new Snackbar(e+" with ID "+this.idInput.value+" was not found on Lodestone.","failure",1e4):a.reason.match(/^ID `.*` is already registered$/iu)?new Snackbar(a.reason+'. Check <a href="'+location.protocol+"//"+location.host+"/fftracker/"+this.select.value+"/"+this.idInput.value+'/" target="_blank">here</a>.',"warning",0):new Snackbar(a.reason,"failure",1e4),t.classList.add("hidden")}))}}typeChange(){let e="^\\d{1,20}$";"pvpteam"!==this.select.value&&"crossworld_linkshell"!==this.select.value||(e="^[0-9a-z]{40}$"),this.idInput.setAttribute("pattern",e)}}
//# sourceMappingURL=track.min.js.map