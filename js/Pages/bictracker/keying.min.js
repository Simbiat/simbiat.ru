export class bicKeying{constructor(){document.getElementById("bic_key").addEventListener("input",(()=>{this.calc()})),document.getElementById("account_key").addEventListener("input",(()=>{this.calc()}))}calc(){let e=document.getElementById("bic_keying"),t=new FormData(e),s=document.getElementById("accCheckResult"),c=String(t.get("bic_key")),i=String(t.get("account_key")),n=document.getElementById("bic_key_sample"),a=document.getElementById("account_key_sample");if(s.classList.remove(...s.classList),null===/^\d{9}$/u.exec(c))return s.classList.add("failure"),s.innerHTML="Неверный формат БИКа",void this.styleBic(n,"warning","БИК");if(this.styleBic(n,"success",c),null===/^\d{5}[\dАВСЕНКМРТХавсенкмртх]\d{14}$/u.exec(i))return s.classList.add("failure"),s.innerHTML="Неверный формат счёта",void this.styleBic(a,"warning","СЧЁТ");this.styleBic(a,"success",i),updateHistory(location.protocol+"//"+location.host+"/bictracker/keying/"+c+"/"+i+"/","Ключевание счёта "+i+pageTitle),s.classList.add("warning"),s.innerHTML="Проверяем...";let d=document.getElementById("bic_spinner");d.classList.remove("hidden"),ajax(location.protocol+"//"+location.host+"/api/bictracker/keying/",t,"json","POST",6e4,!0).then((e=>{s.classList.remove(...s.classList),!0===e.data?(s.classList.add("success"),s.innerHTML="Правильное ключевание"):(s.classList.add("failure"),!1===e.data?s.innerHTML="Непредвиденная ошибка":s.innerHTML="Неверное ключевание. Ожидаемый ключ: "+e.data+" ("+i.replace(/(^\d{5}[\dАВСЕНКМРТХавсенкмртх]\d{2})(\d)(\d{11})$/u,'$1<span class="success">'+e.data+"</span>$3")+")"),d.classList.add("hidden")}))}styleBic(e,t,s=""){e.classList.remove(...e.classList),e.classList.add(t),e.innerHTML=s}}
//# sourceMappingURL=keying.min.js.map