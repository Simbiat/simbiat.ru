export class bicRefresh{refreshButton;constructor(){this.refreshButton=document.getElementById("bicRefresh"),this.refreshButton.addEventListener("click",(e=>{this.refresh(e)}))}refresh(e){this.refreshButton.classList.contains("spin")?(e.stopPropagation(),e.preventDefault()):(this.refreshButton.classList.add("spin"),setTimeout((async()=>{await ajax(location.protocol+"//"+location.host+"/api/bictracker/dbupdate/",null,"json","PUT",3e5).then((t=>{if(!0===t.data)new Snackbar("Библиотека БИК обновлена","success"),this.refreshButton.classList.remove("spin");else if("number"==typeof t.data){let s=new Date(1e3*t.data),r=document.getElementsByClassName("bic_date")[0];r.setAttribute("datetime",s.toISOString()),r.innerHTML=("0"+String(s.getUTCDate())).slice(-2)+"."+("0"+String(s.getMonth()+1)).slice(-2)+"."+String(s.getUTCFullYear()),new Snackbar("Применено обновление за "+r.innerHTML,"success"),this.refreshButton.classList.remove("spin"),this.refresh(e)}else new Snackbar("Не удалось обновить библиотеку БИК","failure",1e4),this.refreshButton.classList.remove("spin")}))}),500))}}
//# sourceMappingURL=search.min.js.map